"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mutation=void 0;var _nanoid=require("nanoid");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var nanoid=(0,_nanoid.customAlphabet)("1234567890",3);var Mutation={//-- EVENT
createEvent:function createEvent(_,_ref,_ref2){var data=_ref.data;var pubSub=_ref2.pubSub,db=_ref2.db;var event=_objectSpread({id:nanoid()},data);db.events.push(event);pubSub.publish("eventCreated",{eventCreated:event});return event},updateEvent:function updateEvent(_,_ref3,_ref4){var id=_ref3.id,data=_ref3.data;var db=_ref4.db;var event_index=db.events.findIndex(function(event){return event.id===id});var updated_event=db.events[event_index]=_objectSpread(_objectSpread({},db.events[event_index]),data);return event_index===-1?new Error("EVENT ID NOT FOUND"):updated_event},deleteEvent:function deleteEvent(_,_ref5,_ref6){var id=_ref5.id;var db=_ref6.db;var event_index=db.events.findIndex(function(event){return event.id===id});var deleted_event=db.events[event_index];db.events.splice(event_index,1);return event_index===-1?new Error("EVENT ID NOT FOUND"):deleted_event},deleteAllEvents:function deleteAllEvents(_,__,_ref7){var db=_ref7.db;var length=db.events.length;db.events.splice(0,length);return{count:length}},//-- LOCATION
createLocation:function createLocation(_,_ref8,_ref9){var data=_ref8.data;var db=_ref9.db;var location=_objectSpread({id:nanoid()},data);db.locations.push(location);return location},updateLocation:function updateLocation(_,_ref10,_ref11){var id=_ref10.id,data=_ref10.data;var db=_ref11.db;var location_index=db.locations.findIndex(function(location){return location.id===id});var updated_location=db.locations[location_index]=_objectSpread(_objectSpread({},db.locations[location_index]),data);return location_index===-1?new Error("LOCATION ID NOT FOUND"):updated_location},deleteLocation:function deleteLocation(_,__,_ref12){var db=_ref12.db;var location_index=db.locations.findIndex(function(location){return location.id===id});var deleted_location=db.locations[location_index];db.locations.splice(location_index,1);return location_index===-1?new Error("LOCATION ID NOT FOUND"):deleted_location},deleteAllLocations:function deleteAllLocations(_,__,_ref13){var db=_ref13.db;var length=db.locations.length;db.locations.splice(0,length);return{count:length}},//-- USER
createUser:function createUser(_,_ref14,_ref15){var data=_ref14.data;var pubSub=_ref15.pubSub,db=_ref15.db;var user=_objectSpread({id:nanoid()},data);db.users.push(user);pubSub.publish("userCreated",{userCreated:user});return user},updateUser:function updateUser(_,_ref16,_ref17){var id=_ref16.id,data=_ref16.data;var db=_ref17.db;var user_index=db.users.findIndex(function(user){return user.id===id});var updated_user=db.users[user_index]=_objectSpread(_objectSpread({},db.users[user_index]),data);return user_index===-1?new Error("USER ID NOT FOUND"):updated_user},deleteUser:function deleteUser(_,_ref18,_ref19){var id=_ref18.id;var db=_ref19.db;var user_index=db.users.findIndex(function(user){return user.id===id});var deleted_user=db.users[user_index];db.users.splice(user_index,1);return user_index===-1?new Error("USER ID NOT FOUND"):deleted_user},deleteAllUsers:function deleteAllUsers(_,__,_ref20){var db=_ref20.db;var length=db.users.length;db.users.splice(0,length);return{count:length}},//-- PARTICIPANT
createParticipant:function createParticipant(_,_ref21,_ref22){var data=_ref21.data;var pubSub=_ref22.pubSub,db=_ref22.db;var participant=_objectSpread({id:nanoid()},data);db.participants.push(participant);pubSub.publish("participantAdded",{participantAdded:participant});return participant},updateParticipant:function updateParticipant(_,_ref23,_ref24){var id=_ref23.id,data=_ref23.data;var db=_ref24.db;var participant_index=db.participants.findIndex(function(participant){return participant.id===id});var updated_participant=db.participants[participant_index]=_objectSpread(_objectSpread({},db.participants[participant_index]),data);return participant_index===-1?new Error("PARTICIPANT ID NOT FOUND"):updated_participant},deleteParticipant:function deleteParticipant(_,_ref25,_ref26){var id=_ref25.id;var db=_ref26.db;var participant_index=db.participants.findIndex(function(participant){return participant.id===id});var deleted_participant=db.participants[participant_index];db.participants.splice(participant_index,1);return participant_index===-1?new Error("PARTICIPANT ID NOT FOUND"):deleted_participant},deleteAllParticipants:function deleteAllParticipants(_,__,_ref27){var db=_ref27.db;var length=db.participants.length;db.participants.splice(0,length);return{count:length}}};exports.Mutation=Mutation;